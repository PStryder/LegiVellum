# LegiVellum Environment Configuration
# Copy this file to .env and configure for your deployment

# ============================================================================
# Database Configuration
# ============================================================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/legivellum
SQL_ECHO=false

# ============================================================================
# Service URLs
# ============================================================================
MEMORYGATE_URL=http://memorygate:8001
ASYNCGATE_URL=http://asyncgate:8002
DELEGATE_URL=http://delegate:8003

# ============================================================================
# Authentication (REQUIRED - do not use defaults in production)
# ============================================================================
# API key for tenant 'pstryder' - CHANGE THIS IN PRODUCTION
LEGIVELLUM_API_KEY=dev-key-pstryder
LEGIVELLUM_TENANT_ID=pstryder

# Additional tenant API keys (format: TENANT_API_KEY_<tenant_id>=<key>)
# TENANT_API_KEY_alice=your-secure-key-here
# TENANT_API_KEY_bob=your-secure-key-here

# ============================================================================
# Service Configuration
# ============================================================================

# AsyncGate
LEASE_DURATION_SECONDS=900  # 15 minutes default

# CORS Origins (comma-separated)
CORS_ORIGINS=*

# Server Ports
# MEMORYGATE_PORT=8001
# ASYNCGATE_PORT=8002
# DELEGATE_PORT=8003

# ============================================================================
# Observability (Optional)
# ============================================================================

# Enable Prometheus metrics (default: false)
ENABLE_METRICS=false

# Metrics endpoint port (default: 9090)
# Access metrics at http://<service>:9090/metrics
METRICS_PORT=9090

# Service name for metrics labels (auto-set by each service)
# SERVICE_NAME=memorygate  # Set automatically

# Log level
LOG_LEVEL=INFO

# Advanced: OpenTelemetry (future)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# SENTRY_DSN=https://...


# ============================================================================
# Production Settings
# ============================================================================
# Enable in production for proper timezone handling
# USE_TZ_AWARE_DATETIMES=true

# Receipt retry configuration
# RECEIPT_RETRY_INTERVAL=60
# RECEIPT_MAX_RETRIES=10

# =============================================================================
# Security Notes
# =============================================================================
# 1. NEVER commit .env files with real secrets to version control
# 2. Use secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.) in production
# 3. Rotate API keys regularly
# 4. Use TLS for all service communication
# 5. Set restrictive CORS_ORIGINS in production
